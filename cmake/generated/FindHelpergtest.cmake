# AUTOGENERATED, DON'T CHANGE THIS FILE!

include(ExternalProject)

 
if(NOT TARGET gtest_external_project)
  if (CMAKE_BUILD_TYPE MATCHES "Test")
    set(CURRENT_CMAKE_BUILD_TYPE "Debug")
  else ()
    set(CURRENT_CMAKE_BUILD_TYPE ${CMAKE_BUILD_TYPE})
  endif ()


  ExternalProject_Add(
    gtest_external_project
    SOURCE_DIR ${USERVER_ROOT_DIR}/submodules/googletest
    DOWNLOAD_COMMAND ""
    PREFIX ${CMAKE_CURRENT_BINARY_DIR}
    CMAKE_ARGS
      -DCMAKE_CXX_STANDARD=${CMAKE_CXX_STANDARD}
      -DCMAKE_C_COMPILER_LAUNCHER=${CMAKE_C_COMPILER_LAUNCHER}
      -DCMAKE_CXX_COMPILER_LAUNCHER=${CMAKE_CXX_COMPILER_LAUNCHER}
      -DCMAKE_BUILD_TYPE=${CURRENT_CMAKE_BUILD_TYPE}
      -DBUILD_GTEST=ON
      -DBUILD_GMOCK=ON
      -DCMAKE_BUILD_TYPE=Release
    PATCH_COMMAND ""
    INSTALL_COMMAND ""
    UPDATE_COMMAND ""
    LOG_DOWNLOAD True
    LOG_CONFIGURE True
    LOG_BUILD True
  )

ExternalProject_Get_Property(gtest_external_project source_dir binary_dir)

set(gtest_INCLUDE_DIRS ${source_dir}/include)
 
file(MAKE_DIRECTORY ${gtest_INCLUDE_DIRS})

add_library(libgtest INTERFACE IMPORTED GLOBAL)
add_dependencies(libgtest
  gtest_external_project
 )
 
target_link_libraries(
  libgtest
    INTERFACE
      "${binary_dir}/lib/libgtest.a"
      "${binary_dir}/lib/libgtest_main.a"
 )
 
target_include_directories(
  libgtest
    INTERFACE
      ${gtest_INCLUDE_DIRS}
      ${source_dir}/googletest/include
)

add_library(libgmock INTERFACE IMPORTED GLOBAL)
add_dependencies(libgmock
  gtest_external_project
  libgtest
 )
 
target_link_libraries(
  libgmock
    INTERFACE
      "${binary_dir}/lib/libgmock.a"
 )
 
target_include_directories(
  libgmock
    INTERFACE
      ${gtest_INCLUDE_DIRS}
      ${source_dir}/googlemock/include
)

  
set(gtest_FOUND ON)
set(Externalgtest_FOUND ON)
set(gtest_external_project_FOUND ON)

endif(NOT TARGET gtest_external_project)
