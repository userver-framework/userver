{% import "utils.inc.jinja" as utils %}
{{- utils.do_not_edit() }}
// This file was generated from {{ proto.source_file }}
#pragma once

#include <userver/ugrpc/client/impl/client_data.hpp>
#include <userver/ugrpc/client/rpc.hpp>

#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wunused-parameter"
#include {{proto.generated_include}}
#pragma clang diagnostic pop

{% call utils.optional_namespace(proto.namespace) %}
{% for service in proto.services %}

// Client for {{service.name}}
class {{service.name}}Client final {
 public:
  {{service.name}}Client(
      const std::shared_ptr<::grpc::Channel>& channel,
      ::grpc::CompletionQueue& queue);
  {% for method in service.method %}

  {% if method.client_streaming and method.server_streaming %}
  using {{method.name}}Call =
        USERVER_NAMESPACE::ugrpc::client::BidirectionalStream<
            {{ method.input_type | grpc_to_cpp_name }},
            {{ method.output_type | grpc_to_cpp_name }}>;
  {% elif method.client_streaming %}
  using {{method.name}}Call =
        USERVER_NAMESPACE::ugrpc::client::OutputStream<
            {{ method.input_type | grpc_to_cpp_name }},
            {{ method.output_type | grpc_to_cpp_name }}>;
  {% elif method.server_streaming %}
  using {{method.name}}Call =
        USERVER_NAMESPACE::ugrpc::client::InputStream<
            {{ method.output_type | grpc_to_cpp_name }}>;
  {% else %}
  using {{method.name}}Call =
        USERVER_NAMESPACE::ugrpc::client::UnaryCall<
            {{ method.output_type | grpc_to_cpp_name }}>;
  {% endif %}

  {{method.name}}Call {{method.name}}(
      {% if not method.client_streaming %}
      const {{ method.input_type | grpc_to_cpp_name }}& request,
      {% endif %}
      std::unique_ptr<::grpc::ClientContext> context =
          std::make_unique<::grpc::ClientContext>());
  {% endfor %}

 private:
  USERVER_NAMESPACE::ugrpc::client::impl::ClientData<{{service.name}}> impl_;
};
{% endfor %}
{% endcall %} {# utils.optional_namespace #}
